(function(window) {function loadStyle(a){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=a;b.media="all";document.getElementsByTagName("head")[0].appendChild(b)}function compareStrLow(a,b){return a.toLowerCase()===b.toLowerCase()}String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})};Task=function(){this.status=0;this.successFn=this.errorFn=this.workFn=null};Task.prototype.isDone=function(){return 2===this.status};Task.prototype.error=function(a){this.errorFn=a;return this};Task.prototype.success=function(a){this.successFn=a;return this};
Task.prototype.doWork=function(){if(!this.isDone()){if(null==(this.workFn||null))throw Error("workFn not defined");if(null==(this.errorFn||null))throw Error("errorFn not defined");if(null==(this.successFn||null))throw Error("successFn not defined");this.status=1;this.workFn(this)}};JSONTask=function(a){this.url=a||"";this.data=null;this.workFn=function(){var b=this;jQuery.getJSON(this.url).success(function(a){b.status=2;b.data=a;b.successFn(b)}).error(function(a,e){b.status=-1;b.errorFn(b,"Error while retrieving data from "+b.url+" . ("+e+")")})}};JSONTask.prototype=new Task;TaskList=function(){this.timeout=1E3*("undefined"!==typeof tasksTimeout?tasksTimeout:15);this.tasks=[];var a=null;this.clear=function(){this.tasks=[];this.status=0};this.addTask=function(b){var c=this;this.tasks.push(b.success(function(){-1!==c.status&&c.isDone()&&(clearTimeout(a),c.status=2,c.successFn(c))}).error(function(b){clearTimeout(a);c.status=-1;c.errorFn(c,"Error while retrieving data. ("+b+")")}))};this.workFn=function(){var b=this,c=0;null!==this.timeout&&0<this.timeout&&(a=setTimeout(function(){b.status=
-1;throw Error("TaskList: timeout reached.");},this.timeout));for(c=0;c<this.tasks.length;c++)this.tasks[c].doWork();0===this.tasks.length&&this.successFn(this)};this.isDone=function(){for(var b=0;b<this.tasks.length;b++)if(!this.tasks[b].isDone())return!1;return!0}};TaskList.prototype=new Task;function LocalStorageHelper(){}LocalStorageHelper.isSupported=function(){return"undefined"!==typeof Storage&&"undefined"!==JSON};LocalStorageHelper.putObject=function(a,b,c,e){b={data:b,ver:Math.max(1,c||0),ttl:Math.max(0,e||0),created:Date.now()};localStorage.setItem(a,JSON.stringify(b))};LocalStorageHelper.getObject=function(a,b){var c=JSON.parse(localStorage.getItem(a));return this.isValid(c,b)?c.data:null};LocalStorageHelper.containsKey=function(a){return null!==localStorage.getItem(a)};
LocalStorageHelper.remove=function(a){localStorage.removeItem(a)};LocalStorageHelper.clear=function(){localStorage.clear()};LocalStorageHelper.isValid=function(a,b){return null!==a&&a.ver===b&&(0===a.ttl||0!==a.ttl&&a.created+a.ttl<Date.now())};LocalStorageHelper.isUpToDate=function(a,b){return null!==LocalStorageHelper.getObject(a,b)};NestedTooltip=function(a,b,c,e){this.parentTooltip=b||null;this.childTooltip=null;this.zindex=null!==b?b.zindex+1:9999;this.dispatcher=a||null;null!==b&&(b.childTooltip=this);var g=null,f=this,d=0,j=!1,n=!1;this.isMouseOver=function(){return n||j};this.setContent=function(b){g.innerHTML=b};this.isHidding=function(){return 0!==d};this.stopHiding=function(){this.isHidding()&&clearTimeout(d)};this.showTooltip=function(b){this.stopHiding();null===g&&(null===g&&(g=document.createElement("div"),g.setAttribute("id",
"db-tooltip-container"),jQuery(g).css("display","none"),document.getElementsByTagName("body")[0].appendChild(g)),jQuery(f.dispatcher).mouseenter(h),jQuery(f.dispatcher).mouseleave(l),jQuery(g).mouseenter(m),jQuery(g).mouseleave(p),j=!0,n=!1);jQuery(g).css("display","none");jQuery(g).css("z-index",this.zindex);jQuery(g).html(b);jQuery(".p-tooltip-image,.db-image").css("display","none");var a,d,c=jQuery(f.dispatcher),e=jQuery(window),q=jQuery(g);q.css("top").replace("px","");b=q.css("left").replace("px",
"");a=Math.max(1,c.offset().top+c.height()-3);a>e.height()+e.scrollTop()-q.outerHeight()-5&&(a=c.offset().top+c.height()-k(f.dispatcher)-q.outerHeight()-5);d=c.offset().left;d>e.width()+e.scrollLeft()-367&&(d=Math.min(b,c.offset().left+c.outerWidth()-367));q.css("top",a);q.css("left",d);jQuery(g).css("display","inline")};this.hideIn=function(b){this.stopHiding();d=setTimeout(function(){f.hideNow()},b)};this.hideNow=function(){this.stopHiding();null!==f.childTooltip&&f.childTooltip.hideNow();jQuery(f.dispatcher).unbind("mouseenter",
h);jQuery(f.dispatcher).unbind("mouseleave",l);jQuery(g).unbind("mouseenter",m);jQuery(g).unbind("mouseleave",p);null!==g&&(document.getElementsByTagName("body")[0].removeChild(g),g=null);e(this)};var k=function(b){var a=jQuery(b).height();jQuery(b).children().each(function(){a=Math.max(a,k(this))});return a},h=function(){j=!0;c(f)},l=function(){j=!1;c(f)},m=function(){n=!0;c(f)},p=function(){n=!1;c(f)}};NestedTooltipMgr=function(a){var b=null,c=this;this.showTooltip=function(a,c){var e=this.getTooltipFor(a);null===e&&(e=new NestedTooltip(a,g(),f,d),null===b&&(b=e));e.showTooltip(c);return e};this.updateTooltip=function(b,a){var d=this.getTooltipFor(b);null!==d&&d.showTooltip(a);return d};this.hideAll=function(){null!==b&&b.hideNow()};this.registerTooltipsHandlers=function(b){jQuery(b).each(function(){jQuery(this).unbind("mouseenter",e).mouseenter(e)})};this.getTooltipFor=function(a){if(null===b)return null;
if(b.dispatcher===a)return b;for(var d=b;null!==d.childTooltip;){if(d.dispatcher===a)return d;d=d.childTooltip}return null};var e=function(b){var d=g();null!==d?d.hideNow():c.hideAll();if(d=a.getMatchFor(b.currentTarget))c.showTooltip(b.currentTarget,a.getLoadingContent()),a.loadData(b.currentTarget,c,d)},g=function(){if(null!==b){for(var a=b;null!==a.childTooltip;)a.isMouseOver(),a=a.childTooltip;return a}return null},f=function(a){a.isMouseOver()?a.stopHiding():a.hideIn(150)},d=function(a){a===
b&&(b=null)}};Gw2BBCodeGlobal=function(){this.imagesUrl="https://s3-eu-west-1.amazonaws.com/gw2bbcode.pl/gw2_images";this.contentUrl="https://s3-eu-west-1.amazonaws.com/gw2bbcode.pl/NEXT/";this.popup_cssURL="https://s3-eu-west-1.amazonaws.com/gw2bbcode.pl/tooltip.css";this.gw2_cssURL="https://s3-eu-west-1.amazonaws.com/gw2bbcode.pl/gw2BBCode.css";this.main_pack={url:this.contentUrl+"main_resource_pack.json",ver:2};this.stances_langEn=["air","earth","fire","water"];this.prof_s_langEn="el en gu me ne ra th wa".split(" ");
this.prof_l_langEn="Elementalist Engineer Guardian Mesmer Necromancer Ranger Thief Warrior".split(" ");this.types_langEn=["skill","trait","boon","condition"];this.lang_packs=[{url:this.contentUrl+"lang_pack_fr.json",ver:1,lang:"fr"}];this.element_type={s:"skills",tr:"traits",b:"boons",co:"conditions"};this.gw2WikiUrl="http://wiki.guildwars2.com/wiki";this.gw2DBUrl="http://www.gw2db.com";this.onClickGoTo="gw2DB";this.gw2DB_PopupHost="http://www.gw2db.com/{0}/{1}/tooltip?x&advanced=1&callback=?"};LoadResourceTask=function(a,b,c){this.data=null;this.ttl=c;this.version=b;this.gw2ResourceUrl=a;this.workFn=function(){var a=this,b=null,c=null;LocalStorageHelper.isSupported()&&(b=LocalStorageHelper.getObject(this.gw2ResourceUrl,this.version));null!==b?(a.status=2,a.data=b.data,a.successFn(a)):(c=(new JSONTask(this.gw2ResourceUrl)).success(function(b){a.data=b.data;LocalStorageHelper.putObject(a.gw2ResourceUrl,a.data,a.version,a.ttl);a.status=2;a.successFn(a)}).error(function(b,c){a.status=-1;a.errorFn(a,
c)}),c.doWork())}};LoadResourceTask.prototype=new Task;ResourceManager=function(){this.loadResource=function(a,b,c,e){this.getResourceList([{url:a,ver:b,ttl:c,data:null}],e)};this.loadResourceList=function(a,b){if(null===a||0===a.length)b(a);else{var c=new TaskList(30),e=0;c.resourceArr=a;c.callback=b;for(e=0;e<a.length;e++)c.addTask(new LoadResourceTask(a[e].url,a[e].ver||1,a[e].ttl||0));c.success(function(a){for(var b=0;b<a.tasks.length;b++)a.resourceArr[b].data=a.tasks[b].data;a.callback(a.resourceArr)}).error(function(a,b){throw Error(b);});c.doWork()}};
this.isUpToDate=function(a,b){return LocalStorageHelper.isSupported()&&LocalStorageHelper.isUpToDate(a,b)};this.isUpToDateArr=function(a){for(var b=0;b<a.length;b++)if(!this.isUpToDate(a[b].url,a[b].ver))return!1;return!0};this.getResource=function(a,b){return LocalStorageHelper.getObject(a,b)};this.putResource=function(a,b,c,e){LocalStorageHelper.putObject(a,b,c,e)}};
NoLocalStorageResourceManager=function(){var a={};this.loadResource=function(a,c,e,g){this.getResourceList([{url:a,data:null}],g)};this.loadResourceList=function(b,c){if(null===b||0===b.length)c(b);else{var e=new TaskList(30),g=0;e.resourceArr=b;e.callback=c;for(g=0;g<b.length;g++)e.addTask(new JSONTask(b[g].url));e.success(function(b){for(var d=0;d<b.tasks.length;d++)b.resourceArr[d].data=b.tasks[d].data,a[b.resourceArr[d].url]=b.tasks[d].data;b.callback(b.resourceArr)}).error(function(a,b){throw Error(b);
});e.doWork()}};this.isUpToDate=function(b){return null!==(a[b]||null)};this.isUpToDateArr=function(a){for(var c=0;c<a.length;c++)if(!this.isUpToDate(a[c].url,a[c].ver))return!1;return!0};this.getResource=function(b){return a[b]||null};this.putResource=function(b,c){a[b]=c}};Gw2TooltipContentObj=function(a){this.getMatchFor=function(a){return/gw2DB_(skills|tasks|traits|items|recipes|achievements|creatures|boons|conditions|guildupgrades)_(\d+)/.exec(a.getAttribute("class").toString())};this.getLoadingContent=function(){return"<div class='db-tooltip'><div class='db-description' style='width: auto'>Loading..</div></div>"};this.loadData=function(g,f,d){var j=c(d[1],d[2]);j?f.updateTooltip(g,j):jQuery.getJSON(a.gw2DB_PopupHost.format(d[1],d[2]),function(a){var j=d[1],h=d[2],
l=e(a);c(j,h)||b.push({id:h,type:j,data:l});f.updateTooltip(g,e(a))})};var b=[],c=function(a,c){for(var d=0;d<b.length;d++)if(b[d].id==c&&b[d].type==a)return b[d].data;return null},e=function(b){return b.Tooltip.replace(/<div class="db-image">\s+<img src=".*?\/>\s+<\/div>/g,"").replace(/<a href=\"/g,'<a href="'+a.gw2DBUrl)}};function LangPackHelper(){}LangPackHelper.getExprStr_profs=function(a,b){return LangPackHelper.getExprStr_generic(a,b,a.prof_s_langEn,"prof")};LangPackHelper.getExprStr_stances=function(a,b){return LangPackHelper.getExprStr_generic(a,b,a.stances_langEn,"stance")};LangPackHelper.getExprStr_types=function(a,b){return LangPackHelper.getExprStr_generic(a,b,a.types_langEn,"types")};
LangPackHelper.getExprStr_generic=function(a,b,c,e){for(var g=0,f=0,d=null,j="",g=0;g<c.length;g++)j+=c[g]+"|";for(g=0;g<a.lang_packs.length;g++)if(d=b.getResource(a.lang_packs[g].url,a.lang_packs[g].ver),null!==d)for(f=0;f<d.dicts[e].length;f++)-1===j.indexOf(d.dicts[e][f])&&(j+=d.dicts[e][f]+"|");return j.slice(0,j.length-1)};LangPackHelper.getProfIDFrom=function(a,b,c){return LangPackHelper.getMasterItemIDFor(a,b,c,a.prof_s_langEn,"prof")};
LangPackHelper.getStanceIDFrom=function(a,b,c){return LangPackHelper.getMasterItemIDFor(a,b,c,a.stances_langEn,"stance")};LangPackHelper.getTypeIDFrom=function(a,b,c){return LangPackHelper.getMasterItemIDFor(a,b,c,a.types_langEn,"types")};
LangPackHelper.getMasterItemIDFor=function(a,b,c,e,g){if(""===c)return"";var f=0,d=0,j=null;c=c.toLowerCase();for(f=0;f<e.length;f++)if(c===e[f].toLowerCase())return e[f];for(f=0;f<a.lang_packs.length;f++)if(j=b.getResource(a.lang_packs[f].url,a.lang_packs[f].ver),null!==j)for(d=0;d<j.dicts[g].length&&d<e.length;d++)if(c===j.dicts[g][d].toLowerCase())return e[d];return""};BBCodeDataEntry=function(a){this.name=a;this.nameObj=this.dataObj=null;this.isMacro=function(){return null!==this.dataObj&&"m"===this.dataObj.t};this.dataObjSet=[];this.fillWeaponSetData=function(a){if(this.isMacro())for(var c=0;c<this.dataObj.m.length;c++)this.dataObjSet.push(a.dataMap[this.dataObj.m[c]])}};
BBCodeData=function(a,b,c){this.gw2Global=a;this.resourceMgr=b;this.patternType=c;this.regex=this.orig="";this.entry2=this.entry1=null;this.isPrefixed=this.showAsText=!1;this.stance=this.options="";this.forcedIdx=-1;this.prof=this.type="";this.isWeaponSet=function(){return null!==this.entry1&&null!==this.entry2};this.toString=function(){return"regex: "+this.regex+"<br>name1: "+this.name1+"<br>name2: "+this.name2+"<br>showAsText: "+this.showAsText+"<br>isPrefixed: "+this.isPrefixed+"<br>stance: "+
this.stance+"<br>forcedIdx: "+this.forcedIdx+"<br>type: "+this.type+"<br>prof: "+this.prof+"<br><br>"};this.setStance=function(c){this.stance=LangPackHelper.getStanceIDFrom(a,b,c)};this.setType=function(c){this.type=LangPackHelper.getTypeIDFrom(a,b,c)};this.setProfession=function(c){this.prof=LangPackHelper.getProfIDFrom(a,b,c)};this.isCorrect=function(){return null===this.entry1&&null!==this.entry2||null!==this.entry1&&(null===this.entry1.dataObj||null===this.entry1.dataObj)||null!==this.entry2&&
(null===this.entry2.dataObj||null===this.entry2.dataObj)?!1:!0}};ClassicPattern=function(a,b){var c=RegExp("\\[([@^_]*)(gw2:)?(("+LangPackHelper.getExprStr_profs(a,b)+"):)?(("+LangPackHelper.getExprStr_types(a,b)+"):)?(.*?)(\\|(.*?))?(:("+LangPackHelper.getExprStr_stances(a,b)+"))?(\\.(\\d+))?\\]","gi");this.process=function(e){for(var g=[],f=c.exec(e),d=null;null!==f;)d=new BBCodeData(a,b,"gw2BBCode"),d.orig=f[0]||"",d.regex=RegExp((f[0]||"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),d.showAsText=-1!==(f[1]||"").indexOf("@"),d.options=f[1]||"",d.isPrefixed=
"gw2:"===(f[2]||"").toLowerCase(),d.entry1=""!==(f[7]||"")?new BBCodeDataEntry(f[7]):null,d.entry2=""!==(f[9]||"")?new BBCodeDataEntry(f[9]):null,d.forcedIdx=Math.max(1,f[13]||1),d.setProfession(f[4]||""),d.setType(f[6]||""),d.setStance(f[11]||""),f=c.exec(e),g.push(d);return g}};WeaponSwapHelper=function(a){this.registerWeaponSwapHandlers=function(){jQuery(".gw2BBCode_weaponSwap").unbind("click").click(b)};var b=function(b){"undefined"!==typeof window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();jQuery(b.target.parentElement).find(".gw2BBCode_weaponSet").each(function(){jQuery(this).css("display","inline"==jQuery(this).css("display")?"none":"inline")});a.hideAll()}};PatternFinders=function(a){this.registeredPatterns=[];this.registerPattern=function(a){this.registeredPatterns.push(a)};this.find=function(b){for(var c=[],e=0,g=0,f,e=0;e<this.registeredPatterns.length;e++){f=this.registeredPatterns[e].process(b);for(g=0;g<f.length;g++)c.push(f[g])}for(e=0;e<c.length;e++)a.findDataAndNameFor(c[e]);return c}};Gw2DBCOMGenerator=function(a){this.getBBCode=function(a){var j="",e="";null!==a.entry1&&!a.entry1.isMacro()?j=b(a.entry1,a):null!==a.entry1&&a.entry1.isMacro()&&(j=c(a.entry1,a));null!==a.entry2&&!a.entry2.isMacro()?e=b(a.entry2,a):null!==a.entry2&&a.entry2.isMacro()&&(e=c(a.entry2,a));return""!==j&&""===e?j:""!==j&&""!==e?(a=""!==(e||""),"<div class='gw2BBCode_weaponSetWraper'>{0}<div class='gw2BBCode_weaponSet'>{1}</div>{2}</div>".format(a?"<div class='gw2BBCode_weaponSwap'></div>":"",j,a?"<div class='gw2BBCode_weaponSet' style='display:none;'>{0}</div>".format(e):
"")):a.orig};var b=function(a,b){var c=a.dataObj,k=f(c,a.nameObj.lang,"en");return e(c.id,k,c.t,g(k,c,b))},c=function(a,b){var c,k=[],h=null,l="",m="";for(c=0;c<a.dataObj.m.length;c++)h=a.dataObjSet[c],l=f(h,a.nameObj.lang,"en"),k.push(e(h.id,l,h.t,g(l,h,b)));for(c=0;c<k.length;c++)m+=k[c]+(b.showAsText&&c!==k.length-1?" ":"");return m},e=function(b,c,e,f){return"<a href='{0}' class='gw2DBTooltip gw2DB_{1}_{2}'>{3}</a>".format("gw2Wiki"===a.onClickGoTo?"{0}/{1}".format(a.gw2WikiUrl,c.replace(/\s/g,
"-").replace(/['"!]/g,"")):"gw2DB"===a.onClickGoTo?"{0}/{1}/{2}".format(a.gw2DBUrl,a.element_type[e],b):"#",a.element_type[e],b,f)},g=function(b,c,e){if(e.showAsText)return b;b=c.t;e=c.id;c="tr"===b?"<img src='{0}/{1}/{2}.png'>".format(a.imagesUrl,a.element_type[b],c.tr||""):"<img src='{0}/{1}/{2}.png'>".format(a.imagesUrl,a.element_type[b],e);return c},f=function(a,b,c){return(b=a.names[b])?b:a.names[c]||""}};HTMLProcessor=function(a,b){var c="html,head,style,title,link,meta,script,object,iframe,code,textarea,a",c=c+",";this.processAll=function(){this.processNode(document.body)};this.processNode=function(e){if(!(null===e||"undefined"==e)){e=e.childNodes;for(var g=0,f=null,d=null,g=0;g<e.length;g++)if(d=e[g],1===d.nodeType&&-1===(c+",").indexOf(d.nodeName.toLowerCase()+",")&&this.processNode(d),!(3!==d.nodeType||""===(d.data||"").trim()))if(f=b.find(d.data),0!==f.length){for(var j=a,n=d.parentNode,k=f.length,
h=d.data,l=0,m=null,m=l=null,l=0;l<k;l++)m=f[l],m.isCorrect()&&(h=h.replace(m.regex,j.getBBCode(m)));if(h!==d.data){l=document.createElement("div");m=document.createDocumentFragment();for(l.innerHTML=h;l.firstChild;)m.appendChild(l.firstChild);n.insertBefore(m,d);n.removeChild(d)}}}}};Gw2DataMap=function(a,b,c){this.dataMap={};this.nameMap={};var e=!0;this.init=function(c){var d=0;b.isUpToDate(a.main_pack.url,a.main_pack.ver)||(e=!1,c.push(a.main_pack));for(d=0;d<a.lang_packs.length;d++)b.isUpToDate(a.lang_packs[d].url,a.lang_packs[d].ver)||(e=!1,c.push(a.lang_packs[d]))};this.init(c);this.findDataAndNameFor=function(a){var b=null;null!==a.entry1&&(b=g(this,a.entry1.name,a),null!==b&&(a.entry1.dataObj=b.data,a.entry1.nameObj=b.name,a.entry1.fillWeaponSetData(this)));null!==a.entry2&&
(b=g(this,a.entry2.name,a),null!==b&&(a.entry2.dataObj=b.data,a.entry2.nameObj=b.name,a.entry2.fillWeaponSetData(this)))};this.fillGw2DataMap=function(){!0===e&&(this.dataMap=b.getResource("Gw2DataMap",1),this.nameMap=b.getResource("Gw2NameMap",1),e=null!==this.dataMap&&null!==this.nameMap);if(!e){var c,g,k=null,h,l;this.dataMap={};this.nameMap={};k=b.getResource(a.main_pack.url,a.main_pack.ver);for(c=0;c<k.length;c++)h=k[c],h.names={en:h.n},this.dataMap[h.id]=h,this.nameMap[f(h.n)]=this.nameMap[f(h.n)]||
[],this.nameMap[f(h.n)].push({id:h.id,n:h.n,lang:"en"});for(c=0;c<a.lang_packs.length;c++){k=b.getResource(a.lang_packs[c].url,a.lang_packs[c].ver);for(g=0;g<k.names.length;g++){h=k.names[g];if(null===(this.dataMap[h[0]]||null))console.log("ERROR: no data for id:{0}, name:{1} in langPack:{2}".format(h[0],h[1],k.lang)),this.dataMap[h[0]]={id:h[0],name:h[1],t:"?",names:{}};this.nameMap[f(h[1])]=this.nameMap[f(h[1])]||[];this.nameMap[f(h[1])].push({id:h[0],n:h[1],lang:k.lang});this.dataMap[h[0]].names[k.lang]=
h[1]}}for(l in this.nameMap)-1!==l.indexOf("gw2_")&&this.nameMap[l].sort(d);b.putResource("Gw2DataMap",this.dataMap,1,0);b.putResource("Gw2NameMap",this.nameMap,1,0);e=!0}};var g=function(a,b,c){var d,e,g=0,p=null,r=b.toLowerCase();if(""===b)return null;d=a.nameMap[f(b)]||null;if(null===d)return null;for(e=0;e<d.length;e++)if(d[e].n.toLowerCase()===r){p=a.dataMap[d[e].id]||null;if(null===p)throw Error("no data for "+b);if((""!==c.stance&&compareStrLow(c.stance,p.st||"")||""===c.stance)&&(""!==c.type&&
compareStrLow(c.type,p.t||"")||""===c.type)&&(""!==c.prof&&compareStrLow(c.prof,p.p||"")||""===c.prof)&&++g===c.forcedIdx)return{data:p,name:d[e]}}return null},f=function(a){return"gw2_"+a.substr(0,3).toLowerCase()},d=function(a,b){return a.n===b.n?0<a.id&&0<b.id||0>a.id&&0>b.id?a.id>b.id?-1:1:0<a.id?-1:1:a.n>b.n?1:-1}};Gw2BBCode=function(){var a=this,b=!1,c=!1;this.gw2Global=new Gw2BBCodeGlobal;var e=null,g=null,f=null,d=null,j=null,n=null,k=j=null;this.isLoadedAndReady=function(){return c&&b};this.registerAllHandlers=function(){if(!this.isLoadedAndReady())return!1;n.registerWeaponSwapHandlers();k.registerTooltipsHandlers(".gw2DBTooltip");return!0};var h=function(){a.isLoadedAndReady()&&(e.processAll(),a.registerAllHandlers())},f=LocalStorageHelper.isSupported()?new ResourceManager:new NoLocalStorageResourceManager,
l=[];loadStyle(a.gw2Global.gw2_cssURL);loadStyle(a.gw2Global.popup_cssURL);j=new Gw2TooltipContentObj(a.gw2Global);k=new NestedTooltipMgr(j);g=new Gw2DataMap(a.gw2Global,f,l);d=new PatternFinders(g);j=new Gw2DBCOMGenerator(a.gw2Global);e=new HTMLProcessor(j,d);n=new WeaponSwapHelper(k);f.loadResourceList(l,function(){c=!0;g.fillGw2DataMap();d.registerPattern(new ClassicPattern(a.gw2Global,f));h()});jQuery(document).ready(function(){b=!0;h()})};window.gw2BBCode=new Gw2BBCode;var testObject={one:1,two:2,three:3};console.log("isLocalStorageSupported: ",LocalStorageHelper.isSupported());console.log("containsKey: ",LocalStorageHelper.containsKey("obj"));console.log("putObject: ",LocalStorageHelper.putObject("obj",testObject));console.log("containsKey: ",LocalStorageHelper.containsKey("obj"));console.log("getObject: ",LocalStorageHelper.getObject("obj"));console.log("containsKey: ",LocalStorageHelper.containsKey("obj"));console.log("remove: ",LocalStorageHelper.remove("obj"));
console.log("containsKey: ",LocalStorageHelper.containsKey("obj"));var taskList=new TaskList(30);taskList.success(function(){console.log("AsyncTaskList: done")});taskList.error(function(a,b){console.log("Error "+b)});taskList.doWork();})(window);
